import{d as E,r as f,G as C,i as h,c as u,o as r,e as g,F as P,j as q,D as H,m as v,t as S,g as A,H as F,u as L,I as R,J as U,z as G,a as k,b as B,f as N,w as J,E as T,_ as K,K as O}from"./7EoZKr8J.js";import{_ as Q}from"./KAnpHhJo.js";import{p as _}from"./CjpCs8HJ.js";import{p as W}from"./TRe2LjYg.js";const X={class:"container-fluid page-pt section-mb-xs"},Y=["innerHTML"],Z={class:"d-flex flex-row flex-wrap justify-content-center"},ee=["onClick"],te=E({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(b,{emit:p}){const l=b,t=f(l.modelValue),i=C(()=>{var e;return(e=t.value)==null?void 0:e.id});function d(e){t.value=e,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const y=p;return h(()=>t.value,()=>{y("update:modelValue",t.value)}),h(()=>l.modelValue,()=>{var e;i.value!=((e=l.modelValue)==null?void 0:e.id)&&(t.value=l.modelValue)},{immediate:!0}),(e,a)=>(r(),u("div",X,[g("h1",{class:"heading-mb text-center",innerHTML:e.$t("shop.heading")},null,8,Y),g("ul",Z,[(r(!0),u(P,null,q(e.visibleCategories,s=>(r(),u("li",{key:s.id,class:"category-item"},[g("button",{class:H({active:v(i)!=null&&v(i)==s.id}),onClick:m=>d(s)},S(s.localizedName()),11,ee)]))),128))])]))}}),oe=A(te,[["__scopeId","data-v-a6b5453c"]]),ae={class:"container-fluid section-mb"},se={class:"row g-2 justify-content-center"},le=["id"],ue=E({__name:"products",async setup(b){let p,l;const t=F(),{t:i}=L(),d=t.currentRoute.value.query,y=W.getAllVisibleProducts(),e=_.getAllVisibleCategories().filter(o=>y.some(n=>n.productCategoryId==o.id)),a=f(e[0]),s=C(()=>a.value.id),m=C(()=>a.value.nameEng),V=f(!1);[p,l]=R(()=>x()),await p,l(),I(),U(async()=>{await x(),a.value=_.getCategoryByName(d.category)||e[0]}),G(()=>{I(),V.value=!0});function w(){return a.value==null?[]:y.filter(o=>o.productCategoryId==s.value)}async function x(){(!d.category||!e.some(o=>o.nameEng==d.category))&&await t.replace({query:{category:_.getCategoryById(1).nameEng}})}function I(){k({title:`lioi | ${m.value}`,meta:[{name:"description",content:i("home.hero.body")}]}),B({ogTitle:`lioi | ${m.value}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:i("home.hero.body"),ogImage:"/img/contact-1.jpg"})}return h(()=>a.value,async()=>{var o,n;t.currentRoute.value.query.category!=m.value&&(await t.replace({query:{category:m.value}}),B({ogTitle:`lioi | ${(o=_.getCategoryById(s.value))==null?void 0:o.localizedName()}`}),k({title:`lioi | ${(n=_.getCategoryById(s.value))==null?void 0:n.localizedName()}`}))}),(o,n)=>{var $;const z=oe,M=K,j=Q;return r(),u("div",null,[N(M,null,{default:J(()=>{var c;return[(c=v(e))!=null&&c.length?(r(),O(z,{key:0,"visible-categories":v(e),modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=D=>a.value=D)},null,8,["visible-categories","modelValue"])):T("",!0)]}),_:1}),g("div",ae,[g("div",se,[($=w())!=null&&$.length&&V.value?(r(!0),u(P,{key:0},q(w(),c=>(r(),u("div",{class:"col-6 col-lg-4 col-xxl-3",key:c.id,id:`product-${c.id}`},[N(j,{product:c},null,8,["product"])],8,le))),128)):T("",!0)])])])}}});export{ue as default};
