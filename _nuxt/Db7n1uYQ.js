import{d as k,r as f,E as C,i as h,c as m,o as i,e as p,F as B,j as N,D as j,m as v,t as D,g as H,G as S,u as F,H as L,z as R,a as x,b as w,f as I,w as A,I as $,_ as U,J as G}from"./D5YzZ3Vl.js";import{_ as J}from"./Blsmh8iO.js";import{p as _}from"./CD-IY8Wq.js";import{p as O}from"./Dpz980qv.js";const Q={class:"container-fluid page-pt section-mb-xs"},K=["innerHTML"],W={class:"d-flex flex-row flex-wrap justify-content-center"},X=["onClick"],Y=k({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(b,{emit:c}){const s=b,t=f(s.modelValue),u=C(()=>{var e;return(e=t.value)==null?void 0:e.id});function l(e){t.value=e,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const o=c;return h(()=>t.value,()=>{o("update:modelValue",t.value)}),h(()=>s.modelValue,()=>{var e;u.value!=((e=s.modelValue)==null?void 0:e.id)&&(t.value=s.modelValue)},{immediate:!0}),(e,g)=>(i(),m("div",Q,[p("h1",{class:"heading-mb text-center",innerHTML:e.$t("shop.heading")},null,8,K),p("ul",W,[(i(!0),m(B,null,N(e.visibleCategories,n=>(i(),m("li",{key:n.id,class:"category-item"},[p("button",{class:j({active:v(u)!=null&&v(u)==n.id}),onClick:y=>l(n)},D(n.localizedName()),11,X)]))),128))])]))}}),Z=H(Y,[["__scopeId","data-v-a6b5453c"]]),ee={class:"container-fluid section-mb"},te={class:"row g-2 justify-content-center"},oe=["id"],re=k({__name:"products",setup(b){const c=S(),{t:s}=F(),t=c.currentRoute.value.query,u=O.getAllVisibleProducts(),l=_.getAllVisibleCategories().filter(a=>u.some(r=>r.productCategoryId==a.id)),o=f(l[0]),e=C(()=>o.value.id),g=C(()=>o.value.nameEng),n=f(!1);L(async()=>{await T(),o.value=_.getCategoryByName(t.category)||l[0]}),R(()=>{E(),n.value=!0});function y(){return o.value==null?[]:u.filter(a=>a.productCategoryId==e.value)}async function T(){(!t.category||!l.some(a=>a.nameEng==t.category))&&await c.replace({query:{category:_.getCategoryById(1).nameEng}})}function E(){x({title:`lioi | ${g.value}`,meta:[{name:"description",content:s("home.hero.body")}]}),w({ogTitle:`lioi | ${g.value}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:s("home.hero.body"),ogImage:"/img/contact-1.jpg"})}return h(()=>o.value,async()=>{var a,r;c.currentRoute.value.query.category!=g.value&&(await c.replace({query:{category:g.value}}),w({ogTitle:`lioi | ${(a=_.getCategoryById(e.value))==null?void 0:a.localizedName()}`}),x({title:`lioi | ${(r=_.getCategoryById(e.value))==null?void 0:r.localizedName()}`}))}),(a,r)=>{var V;const P=Z,q=U,z=J;return i(),m("div",null,[I(q,null,{default:A(()=>{var d;return[(d=v(l))!=null&&d.length?(i(),G(P,{key:0,"visible-categories":v(l),modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=M=>o.value=M)},null,8,["visible-categories","modelValue"])):$("",!0)]}),_:1}),p("div",ee,[p("div",te,[(V=y())!=null&&V.length&&n.value?(i(!0),m(B,{key:0},N(y(),d=>(i(),m("div",{class:"col-6 col-lg-4 col-xxl-3",key:d.id,id:`product-${d.id}`},[I(z,{product:d},null,8,["product"])],8,oe))),128)):$("",!0)])])])}}});export{re as default};
