import{d as x,r as g,w as f,c,e as m,F as $,g as B,o as i,H as N,t as k,_ as w,y as b,q as z,u as T,s as P,a as V,b as I,I as q,z as j,j as H}from"./6fDZchgU.js";import{_ as M}from"./FRnwcbYs.js";import{p as u}from"./B2IN9Dip.js";import{p as F}from"./lseC8CZk.js";const L={class:"container-fluid page-pt section-mb-xs"},R=["innerHTML"],S={class:"d-flex flex-row flex-wrap justify-content-center"},A=["onClick"],D=x({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(C,{emit:s}){const l=C,e=g(l.modelValue);function v(a){e.value=a==null?void 0:a.id,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const p=s;return f(()=>e.value,()=>{p("update:modelValue",e.value)}),f(()=>l.modelValue,()=>{e.value!=l.modelValue&&(e.value=l.modelValue)},{immediate:!0}),(a,_)=>(i(),c("div",L,[m("h1",{class:"heading-mb text-center",innerHTML:a.$t("shop.heading")},null,8,R),m("ul",S,[(i(!0),c($,null,B(a.visibleCategories,r=>(i(),c("li",{key:r.id,class:"category-item"},[m("button",{class:N({active:e.value!=null&&e.value==r.id}),onClick:t=>v(r)},k(r.localizedName()),11,A)]))),128))])]))}}),E=w(D,[["__scopeId","data-v-8b67579f"]]),U={class:"container-fluid section-mb"},G={class:"row g-2 justify-content-center"},J=["id"],X=x({__name:"products",setup(C){const s=g([]),l=g([]),e=g(void 0),v=b(()=>{const t=s.value.find(o=>o.id==e.value);return t==null?void 0:t.nameEng}),p=b(()=>e.value==null?l.value:l.value.filter(t=>t.productCategoryId==e.value)),a=z(),{t:_}=T();P(()=>{var t,o;l.value=F.getAllVisibleProducts(),s.value=u.getAllVisibleCategories().filter(n=>l.value.some(y=>y.productCategoryId==n.id)),e.value=r(),V({title:`lioi | ${(t=u.getCategoryById(e.value))==null?void 0:t.localizedName()}`,meta:[{name:"description",content:_("home.hero.body")}]}),I({ogTitle:`lioi | ${(o=u.getCategoryById(e.value))==null?void 0:o.localizedName()}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:_("home.hero.body"),ogImage:"/img/contact-1.jpg"})});function r(){var o,n;const t=a.currentRoute.value.query;return t.category?(o=u.getCategoryByName(String(t.category)))==null?void 0:o.id:(n=s.value[0])==null?void 0:n.id}return f(()=>e.value,async()=>{var t,o;a.currentRoute.value.query.category!=v.value&&(await a.replace({query:{category:v.value}}),I({ogTitle:`lioi | ${(t=u.getCategoryById(e.value))==null?void 0:t.localizedName()}`}),V({title:`lioi | ${(o=u.getCategoryById(e.value))==null?void 0:o.localizedName()}`}))}),(t,o)=>{var h;const n=E,y=M;return i(),c("div",null,[(h=s.value)!=null&&h.length?(i(),q(n,{key:0,"visible-categories":s.value,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=d=>e.value=d)},null,8,["visible-categories","modelValue"])):j("",!0),m("div",U,[m("div",G,[(i(!0),c($,null,B(p.value,d=>(i(),c("div",{class:"col-6 col-lg-4 col-xxl-3",key:d.id,id:`product-${d.id}`},[H(y,{product:d},null,8,["product"])],8,J))),128))])])])}}});export{X as default};
