import{d as k,r as _,i as h,c as u,o as i,e as m,F as q,j as E,D as H,t as M,g as R,E as S,u as A,G as C,H as I,z as D,a as N,b as $,f as B,w as F,_ as L,I as U,J as G}from"./FVjyRtxK.js";import{_ as J}from"./AcK9MMIl.js";import{p as c}from"./B-VIbdus.js";import{p as O}from"./CvDduryK.js";const K={class:"container-fluid page-pt section-mb-xs"},Q=["innerHTML"],W={class:"d-flex flex-row flex-wrap justify-content-center"},X=["onClick"],Y=k({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(b,{emit:l}){const n=b,a=_(n.modelValue);function g(s){a.value=s==null?void 0:s.id,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const d=l;return h(()=>a.value,()=>{d("update:modelValue",a.value)}),h(()=>n.modelValue,()=>{a.value!=n.modelValue&&(a.value=n.modelValue)},{immediate:!0}),(s,v)=>(i(),u("div",K,[m("h1",{class:"heading-mb text-center",innerHTML:s.$t("shop.heading")},null,8,Q),m("ul",W,[(i(!0),u(q,null,E(s.visibleCategories,t=>(i(),u("li",{key:t.id,class:"category-item"},[m("button",{class:H({active:a.value!=null&&a.value==t.id}),onClick:p=>g(t)},M(t.localizedName()),11,X)]))),128))])]))}}),Z=R(Y,[["__scopeId","data-v-8b67579f"]]),ee={class:"container-fluid section-mb"},te={class:"row g-2 justify-content-center"},oe=["id"],ie=k({__name:"products",async setup(b){var V,x;let l,n;const a=S(),{t:g}=A(),d=_(O.getAllVisibleProducts()),s=_(c.getAllVisibleCategories().filter(e=>d.value.some(o=>o.productCategoryId==e.id))),v=a.currentRoute.value.query;(!v.category||!s.value.some(e=>e.nameEng==v.category))&&([l,n]=C(()=>a.replace({query:{category:c.getCategoryById(1).nameEng}})),await l,n());const t=_((V=([l,n]=C(()=>y()),l=await l,n(),l))==null?void 0:V.id),p=I(()=>{const e=s.value.find(o=>o.id==t.value);return e==null?void 0:e.nameEng}),T=I(()=>t.value==null?d.value:d.value.filter(e=>e.productCategoryId==t.value));t.value=(x=([l,n]=C(()=>y()),l=await l,n(),l))==null?void 0:x.id,w(),D(async()=>{var e;t.value=(e=await y())==null?void 0:e.id,w()});async function y(){const e=a.currentRoute.value.query,o=e.category?c.getCategoryByName(String(e.category)):s.value[0],f=o.nameEng;return await a.replace({query:{category:f}}),o}function w(){var o;const e=(o=c.getCategoryById(t.value))==null?void 0:o.localizedName();N({title:`lioi | ${e}`,meta:[{name:"description",content:g("home.hero.body")}]}),$({ogTitle:`lioi | ${e}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:g("home.hero.body"),ogImage:"/img/contact-1.jpg"})}return h(()=>t.value,async()=>{var e,o;a.currentRoute.value.query.category!=p.value&&(await a.replace({query:{category:p.value}}),$({ogTitle:`lioi | ${(e=c.getCategoryById(t.value))==null?void 0:e.localizedName()}`}),N({title:`lioi | ${(o=c.getCategoryById(t.value))==null?void 0:o.localizedName()}`}))}),(e,o)=>{const f=Z,z=L,P=J;return i(),u("div",null,[B(z,null,{default:F(()=>{var r;return[(r=s.value)!=null&&r.length?(i(),U(f,{key:0,"visible-categories":s.value,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=j=>t.value=j)},null,8,["visible-categories","modelValue"])):G("",!0)]}),_:1}),m("div",ee,[m("div",te,[(i(!0),u(q,null,E(T.value,r=>(i(),u("div",{class:"col-6 col-lg-4 col-xxl-3",key:r.id,id:`product-${r.id}`},[B(P,{product:r},null,8,["product"])],8,oe))),128))])])])}}});export{ie as default};
