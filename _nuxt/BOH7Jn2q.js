import{i as h,r as m,j as p,o as r,c as i,a as d,F as _,k as V,H as b,t as k,_ as x,B,q as f,C as w,y as $,z as I,b as N}from"./2eRX-J6r.js";import{p as y}from"./HpvSruoe.js";import{p as P}from"./DtaCgFFA.js";import{C as q}from"./CZuMzBfi.js";const F={class:"container-fluid page-pt section-mb-xs"},T=["innerHTML"],z={class:"d-flex flex-row flex-wrap justify-content-center"},H=["onClick"],L=h({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(g,{emit:c}){const o=g,t=m(o.modelValue);function s(l){t.value=l==null?void 0:l.id,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const v=c;return p(()=>t.value,()=>{v("update:modelValue",t.value)}),p(()=>o.modelValue,()=>{t.value!=o.modelValue&&(t.value=o.modelValue)},{immediate:!0}),(l,C)=>(r(),i("div",F,[d("h1",{class:"heading-mb text-center",innerHTML:l.$t("shop.heading")},null,8,T),d("ul",z,[(r(!0),i(_,null,V(l.visibleCategories,e=>(r(),i("li",{key:e.id,class:"category-item"},[d("button",{class:b({active:t.value!=null&&t.value==e.id}),onClick:a=>s(e)},k(e.localizedName()),11,H)]))),128))])]))}}),M=x(L,[["__scopeId","data-v-db9146d0"]]),j={class:"container-fluid section-mb"},A={class:"row g-1"},E=["id"],G=h({__name:"products",setup(g){const c=B(),o=m([]),t=m([]),s=m(void 0),v=f(()=>{const e=o.value.find(a=>a.id==s.value);return e==null?void 0:e.nameEng}),l=f(()=>s.value==null?t.value:t.value.filter(e=>e.productCategoryId==s.value));w(()=>{t.value=P.getAllVisibleProducts(),o.value=y.getAllVisibleCategories().filter(e=>t.value.some(a=>a.productCategoryId==e.id)),s.value=C()});function C(){var a,n;const e=c.currentRoute.value.query;return e.category?(a=y.getCategoryByName(String(e.category)))==null?void 0:a.id:(n=o.value[0])==null?void 0:n.id}return p(()=>s.value,async()=>{await c.replace({query:{category:v.value}})}),(e,a)=>{var n;return r(),i(_,null,[(n=o.value)!=null&&n.length?(r(),$(M,{key:0,"visible-categories":o.value,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=u=>s.value=u)},null,8,["visible-categories","modelValue"])):I("",!0),d("div",j,[d("div",A,[(r(!0),i(_,null,V(l.value,u=>(r(),i("div",{class:"col-6 col-xl-4",key:u.id,id:`product-${u.id}`},[N(q,{product:u},null,8,["product"])],8,E))),128))])])],64)}}});export{G as default};
