import{d as E,r as f,G as C,i as h,c as m,o as i,e as g,F as P,j as q,D as S,m as p,t as A,g as F,H as L,u as R,I as Q,a as $,b as k,J as U,z as G,f as T,w as J,E as z,_ as K,K as O}from"./BWJ4YnAc.js";import{_ as W}from"./D1Qc0bo6.js";import{p as d}from"./CJ6igPS-.js";import{p as X}from"./Bn9rB85n.js";const Y={class:"container-fluid page-pt section-mb-xs"},Z=["innerHTML"],ee={class:"d-flex flex-row flex-wrap justify-content-center"},te=["onClick"],oe=E({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(b,{emit:_}){const n=b,o=f(n.modelValue),c=C(()=>{var e;return(e=o.value)==null?void 0:e.id});function y(e){o.value=e,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const l=_;return h(()=>o.value,()=>{l("update:modelValue",o.value)}),h(()=>n.modelValue,()=>{var e;c.value!=((e=n.modelValue)==null?void 0:e.id)&&(o.value=n.modelValue)},{immediate:!0}),(e,a)=>(i(),m("div",Y,[g("h1",{class:"heading-mb text-center",innerHTML:e.$t("shop.heading")},null,8,Z),g("ul",ee,[(i(!0),m(P,null,q(e.visibleCategories,s=>(i(),m("li",{key:s.id,class:"category-item"},[g("button",{class:S({active:p(c)!=null&&p(c)==s.id}),onClick:v=>y(s)},A(s.localizedName()),11,te)]))),128))])]))}}),ae=F(oe,[["__scopeId","data-v-a6b5453c"]]),se={class:"container-fluid section-mb"},ne={class:"row g-2 justify-content-center"},le=["id"],de=E({__name:"products",async setup(b){let _,n;const o=L(),{t:c}=R(),y=X.getAllVisibleProducts(),l=d.getAllVisibleCategories().filter(t=>y.some(r=>r.productCategoryId==t.id)),e=o.currentRoute.value.query;[_,n]=Q(()=>w()),await _,n(),I();const a=f(x()),s=C(()=>a.value.id),v=C(()=>a.value.nameEng);function V(){return a.value==null?[]:y.filter(t=>t.productCategoryId==s.value)}async function w(){(!e.category||!l.some(t=>t.nameEng==e.category))&&await o.replace({query:{category:d.getCategoryById(1).nameEng}})}function x(){const t=e.category;return d.getCategoryByName(t)??l[0]}function I(){const t=x().localizedName();$({title:`lioi | ${t}`,meta:[{name:"description",content:c("home.hero.body")}]}),k({ogTitle:`lioi | ${t}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:c("home.hero.body"),ogImage:"/img/contact-1.jpg"})}const B=f(!1);return U(async()=>{await w(),a.value=d.getCategoryByName(e.category)||l[0]}),G(()=>{I(),B.value=!0}),h(()=>a.value,async()=>{var t,r;o.currentRoute.value.query.category!=v.value&&(await o.replace({query:{category:v.value}}),k({ogTitle:`lioi | ${(t=d.getCategoryById(s.value))==null?void 0:t.localizedName()}`}),$({title:`lioi | ${(r=d.getCategoryById(s.value))==null?void 0:r.localizedName()}`}))}),(t,r)=>{var N;const M=ae,j=K,D=W;return i(),m("div",null,[T(j,null,{default:J(()=>{var u;return[(u=p(l))!=null&&u.length?(i(),O(M,{key:0,"visible-categories":p(l),modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=H=>a.value=H)},null,8,["visible-categories","modelValue"])):z("",!0)]}),_:1}),g("div",se,[g("div",ne,[(N=V())!=null&&N.length&&B.value?(i(!0),m(P,{key:0},q(V(),u=>(i(),m("div",{class:"col-6 col-lg-4 col-xxl-3",key:u.id,id:`product-${u.id}`},[T(D,{product:u},null,8,["product"])],8,le))),128)):z("",!0)])])])}}});export{de as default};
