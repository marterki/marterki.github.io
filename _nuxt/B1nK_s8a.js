import{d as z,r as f,G as C,i as h,c as m,o as i,e as g,F as E,j as P,D as R,m as p,t as S,g as A,H as F,u as L,I as Q,a as $,b as k,J as U,z as G,f as q,w as J,E as T,_ as K,K as O}from"./gOE0ETqm.js";import{_ as W}from"./vGANYq71.js";import{p as d}from"./BYlBxYtu.js";import{p as X}from"./CN2rwl3c.js";const Y={class:"container-fluid page-pt section-mb-xs"},Z=["innerHTML"],ee={class:"d-flex flex-row flex-wrap justify-content-center"},te=["onClick"],oe=z({__name:"CategoriesFilterBar",props:{visibleCategories:{},modelValue:{}},emits:["update:modelValue"],setup(b,{emit:_}){const r=b,o=f(r.modelValue),c=C(()=>{var t;return(t=o.value)==null?void 0:t.id});function y(t){o.value=t,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}const l=_;return h(()=>o.value,()=>{l("update:modelValue",o.value)}),h(()=>r.modelValue,()=>{var t;c.value!=((t=r.modelValue)==null?void 0:t.id)&&(o.value=r.modelValue)},{immediate:!0}),(t,s)=>(i(),m("div",Y,[g("h1",{class:"heading-mb text-center",innerHTML:t.$t("shop.heading")},null,8,Z),g("ul",ee,[(i(!0),m(E,null,P(t.visibleCategories,n=>(i(),m("li",{key:n.id,class:"category-item"},[g("button",{class:R({active:p(c)!=null&&p(c)==n.id}),onClick:v=>y(n)},S(n.localizedName()),11,te)]))),128))])]))}}),ae=A(oe,[["__scopeId","data-v-a6b5453c"]]),se={class:"container-fluid section-mb"},ne={class:"row g-2 justify-content-center"},re=["id"],de=z({__name:"products",async setup(b){let _,r;const o=F(),{t:c}=L(),y=X.getAllVisibleProducts(),l=d.getAllVisibleCategories().filter(e=>y.some(a=>a.productCategoryId==e.id));[_,r]=Q(()=>w()),await _,r();const t=o.currentRoute.value.query;I();const s=f(x()),n=C(()=>s.value.id),v=C(()=>s.value.nameEng);function V(){return s.value==null?[]:y.filter(e=>e.productCategoryId==n.value)}async function w(){const e=o.currentRoute.value.query;(!e.category||!l.some(a=>a.nameEng==e.category))&&await o.replace({query:{category:d.getCategoryById(1).nameEng}})}function x(){const e=t.category;return d.getCategoryByName(e)??l[0]}function I(){const e=x().localizedName();$({title:`lioi | ${e}`,meta:[{name:"description",content:c("home.hero.body")}]}),k({ogTitle:`lioi | ${e}`,ogUrl:"https://lioi.ee",ogType:"website",ogDescription:c("home.hero.body"),ogImage:"/img/contact-1.jpg"})}const B=f(!1);return U(async()=>{await w(),s.value=d.getCategoryByName(t.category)||l[0]}),G(()=>{I(),B.value=!0}),h(()=>s.value,async()=>{var e,a;o.currentRoute.value.query.category!=v.value&&(await o.replace({query:{category:v.value}}),k({ogTitle:`lioi | ${(e=d.getCategoryById(n.value))==null?void 0:e.localizedName()}`}),$({title:`lioi | ${(a=d.getCategoryById(n.value))==null?void 0:a.localizedName()}`}))}),(e,a)=>{var N;const M=ae,j=K,D=W;return i(),m("div",null,[q(j,null,{default:J(()=>{var u;return[(u=p(l))!=null&&u.length?(i(),O(M,{key:0,"visible-categories":p(l),modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=H=>s.value=H)},null,8,["visible-categories","modelValue"])):T("",!0)]}),_:1}),g("div",se,[g("div",ne,[(N=V())!=null&&N.length&&B.value?(i(!0),m(E,{key:0},P(V(),u=>(i(),m("div",{class:"col-6 col-lg-4 col-xxl-3",key:u.id,id:`product-${u.id}`},[q(D,{product:u},null,8,["product"])],8,re))),128)):T("",!0)])])])}}});export{de as default};
